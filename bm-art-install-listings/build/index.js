(()=>{"use strict";var e,t={21:()=>{const e=window.wp.blocks,t=window.React,r=window.wp.i18n,a=window.wp.blockEditor,n=window.wp.element,l=window.wp.components,o="bmArtInstallListings",i="bmArtInstallListingsTimestamp",s=JSON.parse('{"UU":"bm-bernie/bm-art-install-listings"}');(0,e.registerBlockType)(s.UU,{edit:function({apiUrl:e,authToken:s}){const c=(0,a.useBlockProps)(),[m,d]=(0,n.useState)([]),[u,p]=(0,n.useState)("All"),[g,w]=(0,n.useState)("");(0,n.useEffect)((()=>{(async()=>{try{const e=(new Date).getTime(),t=localStorage.getItem(o),r=localStorage.getItem(i);if(t&&r&&e-r<864e5)d(JSON.parse(t));else{const t=await fetch("http://localhost:3001/api/art-installs");if(!t.ok)throw new Error("Network response was not ok");const r=await t.json();console.log("API Response:",r);const a=r.sort(((e,t)=>e.name.toString().toLowerCase()>t.name.toString().toLowerCase()?1:-1));localStorage.setItem(o,JSON.stringify(a)),localStorage.setItem(i,e.toString()),d(a)}}catch(e){console.error("Error fetching API data:",e)}})()}),[e,s]);const f=m.filter((e=>"All"===u||e.program===u)).filter((e=>e.name.toString().toLowerCase().includes(g.toLowerCase())));return(0,t.createElement)("div",{...c},(0,t.createElement)(l.TextControl,{label:(0,r.__)("Search","bm-art-install-listings"),value:g,onChange:e=>w(e),placeholder:(0,r.__)("Type to search...","bm-art-install-listings")}),(0,t.createElement)("div",{className:"filter-toggle"},(0,t.createElement)(l.Button,{variant:"All"===u?"primary":"secondary",onClick:()=>p("All")},(0,r.__)("All","bm-art-install-listings")),(0,t.createElement)(l.Button,{variant:"Honorarium"===u?"primary":"secondary",onClick:()=>p("Honorarium")},(0,r.__)("Honorarium","bm-art-install-listings")),(0,t.createElement)(l.Button,{variant:"Self-Funded"===u?"primary":"secondary",onClick:()=>p("Self-Funded")},(0,r.__)("Self-Funded","bm-art-install-listings"))),f.map((e=>(0,t.createElement)(l.Card,{key:e.uid,className:"listing-card"},(0,t.createElement)(l.CardHeader,null,(0,t.createElement)(l.__experimentalHeading,null,e.name)),(0,t.createElement)(l.CardMedia,null,(0,t.createElement)("img",{src:e.images[0].thumbnail_url,alt:e.name})),(0,t.createElement)(l.CardBody,null,(0,t.createElement)(l.__experimentalText,null,e.description)),(0,t.createElement)(l.CardFooter,{className:"card-footer"},(0,t.createElement)(l.Button,{variant:"secondary"},e.year),(0,t.createElement)(l.Button,{variant:"secondary"},e.artist),(0,t.createElement)(l.Button,{variant:"secondary"},e.hometown),(0,t.createElement)(l.Button,{variant:"secondary"},e.program),e.donation_link&&(0,t.createElement)(l.Button,{variant:"primary",href:e.donation_link,target:"_blank",rel:"noopener noreferrer"},(0,r.__)("Donate","bm-art-install-listings")))))))},save:function(){return(0,t.createElement)("div",{...a.useBlockProps.save()})}})}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,a),l.exports}a.m=t,e=[],a.O=(t,r,n,l)=>{if(!r){var o=1/0;for(m=0;m<e.length;m++){for(var[r,n,l]=e[m],i=!0,s=0;s<r.length;s++)(!1&l||o>=l)&&Object.keys(a.O).every((e=>a.O[e](r[s])))?r.splice(s--,1):(i=!1,l<o&&(o=l));if(i){e.splice(m--,1);var c=n();void 0!==c&&(t=c)}}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[r,n,l]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,l,[o,i,s]=r,c=0;if(o.some((t=>0!==e[t]))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(s)var m=s(a)}for(t&&t(r);c<o.length;c++)l=o[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(m)},r=globalThis.webpackChunkbm_art_install_listings=globalThis.webpackChunkbm_art_install_listings||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=a.O(void 0,[350],(()=>a(21)));n=a.O(n)})();