(()=>{"use strict";var e={338:(e,t,a)=>{var n=a(795);t.H=n.createRoot,n.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};const a=window.React,n=window.wp.element,r=window.wp.components,l=window.wp.i18n;var o=function a(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,a),l.exports}(338);const i="bmArtInstallListings",s="bmArtInstallListingsTimestamp",c=({apiUrl:e,authToken:t})=>{const[o,c]=(0,n.useState)([]),[m,d]=(0,n.useState)("All"),[u,g]=(0,n.useState)("");(0,n.useEffect)((()=>{(async()=>{try{const e=(new Date).getTime(),t=localStorage.getItem(i),a=localStorage.getItem(s);if(t&&a&&e-a<864e5)c(JSON.parse(t));else{const t=await fetch("http://localhost:3001/api/art-installs");if(!t.ok)throw new Error("Network response was not ok");const a=await t.json();console.log("API Response:",a);const n=a.sort(((e,t)=>e.name.toString().toLowerCase()>t.name.toString().toLowerCase()?1:-1));localStorage.setItem(i,JSON.stringify(n)),localStorage.setItem(s,e.toString()),c(n)}}catch(e){console.error("Error fetching API data:",e)}})()}),[e,t]);const p=o.filter((e=>"All"===m||e.program===m)).filter((e=>e.name.toString().toLowerCase().includes(u.toLowerCase())));return(0,a.createElement)("div",null,(0,a.createElement)(r.TextControl,{label:(0,l.__)("Search","bm-art-install-listings"),value:u,onChange:e=>g(e),placeholder:(0,l.__)("Type to search...","bm-art-install-listings")}),(0,a.createElement)("div",{className:"filter-toggle"},(0,a.createElement)(r.Button,{variant:"All"===m?"primary":"secondary",onClick:()=>d("All")},(0,l.__)("All","bm-art-install-listings")),(0,a.createElement)(r.Button,{variant:"Honorarium"===m?"primary":"secondary",onClick:()=>d("Honorarium")},(0,l.__)("Honorarium","bm-art-install-listings")),(0,a.createElement)(r.Button,{variant:"Self-Funded"===m?"primary":"secondary",onClick:()=>d("Self-Funded")},(0,l.__)("Self-Funded","bm-art-install-listings"))),p.map((e=>(0,a.createElement)(r.Card,{key:e.uid,className:"listing-card"},(0,a.createElement)(r.CardHeader,null,(0,a.createElement)(r.__experimentalHeading,null,e.name)),(0,a.createElement)(r.CardMedia,null,(0,a.createElement)("img",{src:e.images[0].thumbnail_url,alt:e.name})),(0,a.createElement)(r.CardBody,null,(0,a.createElement)(r.__experimentalText,null,e.description)),(0,a.createElement)(r.CardFooter,{className:"card-footer"},(0,a.createElement)(r.Button,{variant:"secondary"},e.year),(0,a.createElement)(r.Button,{variant:"secondary"},e.artist),(0,a.createElement)(r.Button,{variant:"secondary"},e.hometown),(0,a.createElement)(r.Button,{variant:"secondary"},e.program),e.donation_link&&(0,a.createElement)(r.Button,{variant:"primary",href:e.donation_link,target:"_blank",rel:"noopener noreferrer"},(0,l.__)("Donate","bm-art-install-listings")))))))};document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("#bm-art-install-listings-block").forEach((e=>{(0,o.H)(e).render((0,a.createElement)(c,null))}))}))})();